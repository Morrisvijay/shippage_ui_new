<section class="content">
    <div class="content-block">
      <div class="block-header">
        <!-- breadcrumb -->
        <app-breadcrumb [title]="''" [items]="['Billing']" [active_item]="'Purchase Invoice'">
        </app-breadcrumb>
      </div>
      <div class="row clearfix">
        <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
          <div class="card ">
            <div class="body">
              <form class="m-4" [formGroup]="docForm" (ngSubmit)="onSubmit()">
                 <div class="row">
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Invoice Date</mat-label>
                      <input matInput [matDatepicker]="picker" formControlName="invoiceDate">
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Company Name</mat-label>
                          <mat-select formControlName="companyName" required>
                            <mat-option [value]="'1'">
                              Paragon
                            </mat-option>
                          </mat-select>
                          <mat-error *ngIf="docForm.get('companyName').hasError('required')">
                            Company Name is required
                          </mat-error>
                    </mat-form-field>
                    </div>   
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Manual Invoice No</mat-label>
                      <input matInput formControlName="manualInvoiceNo" required>
                      <mat-error *ngIf="docForm.get('manualInvoiceNo').hasError('required')">
                        Manual Invoice No is required
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <mat-label>Quotation</mat-label>
                        <mat-select formControlName="quotation" required>
                          <mat-option [value]="'1'">
                            Development
                          </mat-option>
                          <mat-option [value]="'2'">
                            Designing
                          </mat-option>
                          <mat-option [value]="'3'">
                            Testing
                          </mat-option>
                          <mat-option [value]="'4'">
                            HR
                          </mat-option>
                        </mat-select>
                  </mat-form-field>
                  </div>     
                </div>
                <div class="row">
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Currency</mat-label>
                      <input matInput formControlName="currency" required>
                      <mat-error *ngIf="docForm.get('currency').hasError('required')">
                        Currency is required
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-xl-3 col-lg-3 col-md-12 col-sm-12">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Due Date</mat-label>
                      <input matInput [matDatepicker]="picker" formControlName="dueDate">
                      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                      <mat-datepicker #picker></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Customer</mat-label>
                          <mat-select formControlName="customer" required>
                            <mat-option [value]="'1'">
                              Development
                            </mat-option>
                            <mat-option [value]="'2'">
                              Designing
                            </mat-option>
                            <mat-option [value]="'3'">
                              Testing
                            </mat-option>
                            <mat-option [value]="'4'">
                              HR
                            </mat-option>
                          </mat-select>
                    </mat-form-field>
                    </div>     
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Exchange rate</mat-label>
                      <input matInput formControlName="exchangeRate" required>
                      <mat-error *ngIf="docForm.get('exchangeRate').hasError('required')">
                        Exchange Rate is required
                      </mat-error>
                    </mat-form-field>
                  </div>    
                </div>
                <div class="row">
                  <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Type</mat-label>
                        <mat-select formControlName="type" required>
                          <mat-option [value]="'1'">
                            Cash
                          </mat-option>
                          <mat-option [value]="'2'">
                            Bank
                          </mat-option>
                        </mat-select>
                        <mat-error *ngIf="docForm.get('type').hasError('required')">
                          Type is required
                        </mat-error>
                    </mat-form-field>
                  </div> 
                  <div class="col-xl-3 col-lg-12 col-md-12 col-sm-12 ">
                    <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                      <mat-label>Narration</mat-label>
                      <textarea matInput formControlName="narration"></textarea>
                    </mat-form-field>
                  </div> 
                </div><br> 
                
                <h5>Item List</h5>
              <!-- First detail Row -->
               <div *ngFor ="let obj of dataarray; let i=index" style="border: 1px solid #35daf95e; box-shadow: 0px 0px 20px -6px rgb(0 0 0 / 67%);" 
                  class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                  <table>
                    <tr class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                      <td>
                        <button mat-mini-fab color="warn" (click)="removeRow(i)">
                          <mat-icon class="col-white">delete</mat-icon>
                        </button>
                        </td>
                        <td>
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Item</mat-label>
                            <mat-select name ="pol{{i}}" [(ngModel)] = "obj.pol" [ngModelOptions]="{standalone: true}">
                              <mat-option [value]="'1'">
                                Introduction / Presentation
                              </mat-option>
                              <mat-option [value]="'2'">
                                Service Requirement
                              </mat-option>
                              <mat-option [value]="'3'">
                                Offer Rates
                              </mat-option>
                              <mat-option [value]="'4'">
                                Negotiations
                              </mat-option>
                              <mat-option [value]="'5'">
                                Collection Follow up
                              </mat-option>
                              <mat-option [value]="'6'">
                                Courtesy call
                              </mat-option>
                            </mat-select>
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Quantity</mat-label>
                            <input matInput name ="pod{{i}}"  [(ngModel)] = "obj.pod" [ngModelOptions]="{standalone: true}">
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Unit Price</mat-label>
                            <input matInput name ="containerType{{i}}" [(ngModel)] = "obj.containerType" [ngModelOptions]="{standalone: true}">
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Tax Amount</mat-label>
                            <input matInput name ="status{{i}}" [(ngModel)] = "obj.status" [ngModelOptions]="{standalone: true}">
                          </mat-form-field>
                        </td>
                        <td>
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Amount</mat-label>
                            <input matInput name ="conditionSupport{{i}}" [(ngModel)] = "obj.conditionSupport" [ngModelOptions]="{standalone: true}">
                          </mat-form-field>
                        </td>
                    </tr>
                </table>
              </div><br> 
               <div class="row">
                <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                <button mat-mini-fab color="primary" (click)="addRow()">
                  <mat-icon class="col-white">add</mat-icon>
                </button>
                </div><br>
                <!-- <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 " style="margin-left: 130px;">
                <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                  <mat-label>BOO No</mat-label>
                  <input matInput formControlName="booNo" required>
                  <mat-error *ngIf="docForm.get('booNo').hasError('required')">
                    BOO No is required
                  </mat-error>
                </mat-form-field>
                </div> -->
                <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 " style="margin-left: 557px;">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <mat-label>Total</mat-label>
                    <input matInput formControlName="totalFirstRow" required>
                  </mat-form-field>
                  </div>
              </div> 
              
               <h5>Charges List</h5> 
              <!-- Second detail Row --> 
               <div *ngFor ="let obj of dataarray1; let i=index" style="border: 1px solid #35daf95e; box-shadow: 0px 0px 20px -6px rgb(0 0 0 / 67%);" 
                  class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                  <table>
                    <tr class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
                      <td>
                        <button mat-mini-fab color="warn" (click)="removeRow1(i)">
                          <mat-icon class="col-white">delete</mat-icon>
                        </button>
                        </td>
                        <td class="col-xl-4 col-lg-12 col-md-12 col-sm-12">
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Charges</mat-label>
                            <mat-select name ="objective{{i}}" [(ngModel)] = "obj.objective" [ngModelOptions]="{standalone: true}">              
                              <mat-option [value]="'1'">
                                Introduction / Presentation
                              </mat-option>
                              <mat-option [value]="'2'">
                                Service Requirement
                              </mat-option>
                              <mat-option [value]="'3'">
                                Offer Rates
                              </mat-option>
                              <mat-option [value]="'4'">
                                Negotiations
                              </mat-option>
                            </mat-select>
                            </mat-form-field>
                        </td>
                        <td class="col-xl-4 col-lg-12 col-md-12 col-sm-12">
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Short Details</mat-label>
                            <input matInput name ="commodity{{i}}"  [(ngModel)] = "obj.commodity" [ngModelOptions]="{standalone: true}">
                          </mat-form-field>
                        </td>
                        <td class="col-xl-4 col-lg-12 col-md-12 col-sm-12">
                          <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                            <mat-label>Amount</mat-label>
                            <input matInput name ="nextCallDate{{i}}" [(ngModel)] = "obj.nextCallDate" [ngModelOptions]="{standalone: true}">
                          </mat-form-field>
                        </td>
                    </tr>
                </table>
              </div><br>  
               <div class="row">
                <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                <button mat-mini-fab color="primary" (click)="addRow1()">
                  <mat-icon class="col-white">add</mat-icon>
                </button>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 " style="margin-left: 575px;">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <mat-label>Total</mat-label>
                    <input matInput formControlName="totalSecondRow" required>
                  </mat-form-field>
                </div>
              </div> 
               <div class="row">
              <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 " style="margin-left: 865px;">
                <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                  <mat-label>Grand Total</mat-label>
                  <input matInput formControlName="grandTotal" required>
                </mat-form-field>
              </div>
            </div> 
              <div class="row"> 
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <button (click) = "onSubmit()" class="btn-space" mat-raised-button
                    style="margin-left: 38%; color: aliceblue; background-color: green;">Save</button>
                  <button (click) = "reset()" class="btn-space" mat-raised-button
                    color="primary" >Reset</button>
                  <button color="warn" (click) = "onCancel()" type="button" mat-raised-button>Cancel</button>
                </div>
              </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>