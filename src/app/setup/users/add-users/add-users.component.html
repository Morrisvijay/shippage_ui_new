<section class="content">
  <div class="content-block">
    <div class="block-header">
      <!-- breadcrumb -->
      <app-breadcrumb [title]="'Create User'" [items]="['Setup']" [active_item]="'Create User'">
      </app-breadcrumb>
    </div>
    <div class="row clearfix">
      <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12">
        <div class="card ">
          <div class="body">
            <form class="m-4" [formGroup]="docForm">
              <!-- <fieldset class="border p-2" style="border: solid 0.5px !important;"> -->
                <!-- <legend  class="float-none w-auto p-2">User</legend> -->
              <div style="margin-left: 15%; margin-top:-1%" class="row" >
                <div  *ngIf="edit" class="col-xl-1 col-lg-3 col-md-12 col-sm-12 ">
                  <mat-label class="lable">User Id</mat-label>
                  </div>
                  <div  *ngIf="edit" class="col-xl-2 col-lg-3 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field style="color: #C6C6C6;  pointer-events: none;" class="example-full-width form-control-sm" appearance="outline"> -->
                    <input type="text" class="form-control" style="color: #C6C6C6;  pointer-events: none;" formControlName="newUserName" readonly>
                    <!-- <mat-error *ngIf="docForm.get('newUserName').hasError('required')">
                      User Id is required
                    </mat-error>
                    <mat-error *ngIf="docForm.controls['newUserName'].hasError('userValid') ">
                      User Id already exists.Try some other Name
                    </mat-error> -->
                  <!-- </mat-form-field> -->
                </div>

                <div *ngIf="!edit" class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-label class="lable">User Id<span class="errorColor">*</span> </mat-label>
                  </div>
                  <div *ngIf="!edit" class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field class="example-full-width form-control-sm" appearance="outline"> -->
                    <input type="text" class="form-control"(blur)="userNameValidation($event.target.value)"  formControlName="newUserName" required maxlength="30">
                    <mat-error *ngIf="submitted && docForm.get('newUserName').hasError('required')">
                      User Id is required
                    </mat-error>
                    <mat-error *ngIf="submitted && docForm.controls['newUserName'].hasError('userValid') ">
                      User Id already exists.Try some other Name
                    </mat-error>
                  <!-- </mat-form-field> -->
                </div>

                <div class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-label class="lable"style=" white-space: nowrap;">First Name<span class="errorColor">*</span>  </mat-label>
                  </div>
                  <div class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field class="example-full-width form-control-sm" appearance="outline">                     -->
                    <input   type="text" class="form-control" formControlName="firstName" required maxlength="30">
                    <mat-error *ngIf="submitted && docForm.get('firstName').hasError('required')">
                      First Name is required
                    </mat-error>
                  <!-- </mat-form-field> -->
                </div>
                <div class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-label class="lable"style=" white-space: nowrap;">Last Name<span class="errorColor">*</span> </mat-label>
                  </div>
                  <div class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field class="example-full-width form-control-sm" appearance="outline">                    -->
                    <input  type="text" class="form-control"  formControlName="lastName" required maxlength="30">
                    <mat-error *ngIf="submitted && docForm.get('lastName').hasError('required')">
                      Last Name is required
                    </mat-error>
                  <!-- </mat-form-field> -->
                </div> 
                </div>
              <br>
              <div style="margin-left: 15%;"class="row" >
                <!-- <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <mat-label>Password</mat-label>
                    <input matInput formControlName="newPassword" type="password" required autocomplete="new-password" maxlength="10">
                    <mat-error *ngIf="docForm.controls['newPassword'].hasError('required') && docForm.controls['newPassword'].touched">
                      New Password Required
                    </mat-error>   
                    <mat-error *ngIf="(docForm.controls['newPassword'].hasError('passwordStrength'))">
                      Password must have One Upper,LowerCase,Alphabetic And Special Character(except # symbol)
                    </mat-error> 
                    <mat-error  *ngIf="docForm.controls['newPassword'].hasError('minlength')">
                      Password must have 6 characters
                    </mat-error>        
                    
                  </mat-form-field>
                </div>
                <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-form-field class="example-full-width form-control-sm" appearance="outline">
                    <mat-label>Confirm Password</mat-label>
                    <input matInput formControlName="confirmPassword" type="password" required maxlength="10">
                    <mat-error *ngIf="docForm.controls['confirmPassword'].hasError('required') && docForm.controls['confirmPassword'].touched">
                      Confirm New Password Required
                    </mat-error>
                    <mat-error *ngIf="docForm.controls['confirmPassword'].hasError('mustMatch')">
                      Passwords Must Match
                    </mat-error>
                  </mat-form-field>
                </div> -->
              
                <div class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-label class="lable">Email Id</mat-label>
                  </div>
                  <div class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field class="example-full-width form-control-sm" appearance="outline">                   -->
                    <input  type="text" class="form-control" (blur)="emailIdValidation($event.target.value)"  formControlName="emailId" required maxlength="150">
                  <!-- </mat-form-field> -->
                  <mat-error *ngIf="submitted && docForm.controls['emailId'].hasError('emailValid') ">
                    Email Id already exists.Try some other Email Id
                  </mat-error>
                </div>
                <div class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-label class="lable"style=" white-space: nowrap;">Phone No</mat-label>
                  </div>
                  <div class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field class="example-full-width form-control-sm" appearance="outline">                    -->
                    <input  type="text" class="form-control" (blur)="phoneNoValidation($event.target.value)"  formControlName="mobileNo" (keypress)="keyPressPhoneNo($event)" required maxlength="12">
                  <!-- </mat-form-field> -->
                  <mat-error *ngIf="submitted && docForm.controls['mobileNo'].hasError('mobileNoValid') ">
                    Phone No already exists.Try some other Phone No
                  </mat-error>
                </div>

                <!-- <div class="col-xl-3 col-lg-6 col-md-12 col-sm-12">
                  <mat-label class="lable">Upload Photo</mat-label>
                  <app-file-upload formControlName="uploadImg" (change)="uploadFile($event)"></app-file-upload>
                  <a></a>
                </div>
                
                <div class="col-md-3 profile-img">
                  <img [attr.src]="this.imagePath" />
              </div> -->

              <div class="col-xl-1 col-lg-6 col-md-12 col-sm-12">
                <mat-label class="lable"style=" white-space: nowrap;">Upload Photo</mat-label>
                </div>
                <div class="col-xl-2 col-lg-6 col-md-12 col-sm-12">
                <input type="file" formControlName="uploadImg" #userPhoto (change)="onSelectFile($event,'image')"
                    accept="image/jpg,image/png,image/jpeg" class="form-control"/>
                <p class="upload-img-text">*File size should be less than <b>100kb</b> and supporting images types <b>
                        jpg,jpeg,png </b></p>
                <!-- <div class="smallCard" *ngFor="let file of imageFiles; let i=index">
                    <div class="row">
                        <div class="col-md-10">
                            {{i+1}}.{{file.name}}
                        </div>
                        <div class="col-md-2 text-right">
                            <span class="fas fa-times" style="color:red;font-size: 20px;cursor: pointer;"
                                (click)="deleteImageFiles(i)"></span>
                        </div>
                    </div>
                </div> -->
              </div>
            <div class="col-md-3 sign-img"style="margin-top: -3.5%;"> 
              <img [attr.src]="this.imagePath" class="thumb-image" style="max-height: 193px; width: 132px;"/>
            </div>

              </div>
              <div style="margin-left: 15%; " class="row" >
                <div class="col-xl-1 col-lg-3 col-md-12 col-sm-12">
                  <mat-label class="lable" style="white-space: nowrap;margin-left: 4%;">Pharmacies' Data<span class="errorColor">*</span> </mat-label>
                  </div>
                  <div class="col-xl-2 col-lg-3 col-md-12 col-sm-12">
                  <mat-radio-group formControlName="pharmaciesType" (click)="pharmaciesTypeValidation()" style="margin-left: 22%;">
                    <!-- <mat-radio-button value="SELECTED">Selected</mat-radio-button>
                    <mat-radio-button value="ALL">All</mat-radio-button> -->
                    <input type="radio" formControlName="pharmaciesType" value="SELECTED"> &nbsp;Selected&nbsp;
                    <input type="radio" formControlName="pharmaciesType" value="ALL"> &nbsp;All&nbsp;
                  </mat-radio-group>

                  <mat-error *ngIf="submitted && docForm.get('pharmaciesType').hasError('required')">
                    Pharmacies Data is required
                  </mat-error>
                </div>

                <div *ngIf="this.docForm.value.pharmaciesType=='SELECTED'" class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                  <mat-label class="lable">Company</mat-label>
                  </div>
                  <div *ngIf="this.docForm.value.pharmaciesType=='SELECTED'" class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                  <!-- <mat-form-field class="example-full-width form-control-sm" appearance="outline">                  -->
                    <mat-select type="text" class="form-control"formControlName="companyCode">
                      <mat-option *ngFor="let title of companyList" [value]="title.id">
                        {{title.text}}
                      </mat-option>
                    </mat-select>
                    <!-- <mat-error *ngIf="docForm.get('companyCode').hasError('required')">
                      Company is required
                    </mat-error> -->
                  <!-- </mat-form-field> -->
                </div>

                <div class="col-xl-1 col-lg-6 col-md-12 col-sm-12 ">
                    <mat-label class="lable" >Roles<span class="errorColor">*</span> </mat-label>
                    </div>
                    <div class="col-xl-2 col-lg-6 col-md-12 col-sm-12 ">
                    <ng-multiselect-dropdown class="inputTxt" formControlName="roles" 
                    [placeholder]="'Forms'"
                    [settings]="dropdownSettings"
                    [data]="dropdownList"
                    [(ngModel)]="selectedItems"
                    (onSelect)="onItemSelect($event)"
                    (onSelectAll)="onSelectAll($event)">
           </ng-multiselect-dropdown>
                    <mat-error *ngIf="submitted && submitted && docForm.get('roles').hasError('required')">
                      Roles is required
                    </mat-error> 
                </div> 
              </div>
              <!-- </fieldset> -->
              <br>
              <div class="row">
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 mb-3">
                  <button *ngIf ="!edit" (click) = "onSubmit()" class="btn-space" mat-raised-button
                    style="margin-left: 42%; color: aliceblue; background-color: green;">Submit</button>
                  <button *ngIf ="edit" (click) = "update()" class="btn-space" mat-raised-button 
                    style="margin-left: 42%; color: aliceblue; background-color: green;">Update</button>
                  <button color="warn" (click) = "onCancel()" class="btn-space" type="button" mat-raised-button >Cancel</button>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>